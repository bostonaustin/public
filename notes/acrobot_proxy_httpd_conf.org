ServerRoot "/appl/apache-2.4.18"
PidFile /appl/ge/rproxy/corpCommApp/httpd.pid
Timeout 600
KeepAlive On
MaxKeepAliveRequests 1000
KeepAliveTimeout 2

#<IfModule prefork.c>
#StartServers        10
#MinSpareServers     10
#MaxSpareServers     21
#MaxClients         250
#MaxRequestsPerChild  25000
#</IfModule>

<IfModule worker.c>
ThreadLimit         200
StartServers        5
MaxClients          2000
MinSpareThreads     100
MaxSpareThreads     1000
ThreadsPerChild     200
MaxRequestsPerChild 20000
</IfModule>

#<IfModule worker.c>
#StartServers         2
#ServerLimit         20
#MaxClients         500
#MinSpareThreads     25
#MaxSpareThreads     75
#ThreadsPerChild     25
#MaxRequestsPerChild 25000
#</IfModule>

#<IfModule perchild.c>
#NumServers           5
#StartThreads         5
#MinSpareThreads      5
#MaxSpareThreads     10
#MaxThreadsPerChild  20
#MaxRequestsPerChild  0
#</IfModule>

#Siteminder Load Module
#LoadModule sm_module /usr/netegrity/siteminder5qmr7/webagent/lib/libmod_sm20.so

LoadModule authz_host_module modules/mod_authz_host.so
#LoadModule access_module modules/mod_access.so
#LoadModule auth_module modules/mod_auth.so
#LoadModule auth_anon_module modules/mod_auth_anon.so
#LoadModule auth_digest_module modules/mod_auth_digest.so
#LoadModule include_module modules/mod_include.so
LoadModule log_config_module modules/mod_log_config.so
LoadModule env_module modules/mod_env.so
#LoadModule mime_magic_module modules/mod_mime_magic.so
#LoadModule cern_meta_module modules/mod_cern_meta.so
LoadModule expires_module modules/mod_expires.so
LoadModule headers_module modules/mod_headers.so
#LoadModule usertrack_module modules/mod_usertrack.so
#LoadModule unique_id_module modules/mod_unique_id.so
LoadModule setenvif_module modules/mod_setenvif.so
LoadModule proxy_module modules/mod_proxy.so
LoadModule proxy_connect_module modules/mod_proxy_connect.so
LoadModule proxy_ftp_module modules/mod_proxy_ftp.so
LoadModule proxy_http_module modules/mod_proxy_http.so
LoadModule mime_module modules/mod_mime.so
#LoadModule dav_module modules/mod_dav.so
LoadModule status_module modules/mod_status.so
#LoadModule autoindex_module modules/mod_autoindex.so
#LoadModule asis_module modules/mod_asis.so
#LoadModule info_module modules/mod_info.so
#LoadModule cgi_module modules/mod_cgi.so
#LoadModule dav_fs_module modules/mod_dav_fs.so
#LoadModule vhost_alias_module modules/mod_vhost_alias.so
#LoadModule negotiation_module modules/mod_negotiation.so
LoadModule dir_module modules/mod_dir.so
#LoadModule imap_module modules/mod_imap.so
LoadModule actions_module modules/mod_actions.so
#LoadModule speling_module modules/mod_speling.so
#LoadModule userdir_module modules/mod_userdir.so
LoadModule alias_module modules/mod_alias.so
LoadModule ssl_module modules/mod_ssl.so
#LoadModule rewrite_module modules/mod_rewrite.so

# CGID
#LoadModule cgid_module modules/mod_cgid.so
#ScriptSock /appl/ge/rproxy/maintenance/cgid.sock

LoadModule unixd_module modules/mod_unixd.so
LoadModule access_compat_module modules/mod_access_compat.so
LoadModule authn_dbm_module modules/mod_authn_dbm.so
LoadModule authz_dbm_module modules/mod_authz_dbm.so
LoadModule socache_dbm_module modules/mod_socache_dbm.so
LoadModule authn_core_module modules/mod_authn_core.so
LoadModule authz_core_module modules/mod_authz_core.so

#SiteMinder WebAgent.conf
#SmInitFile /appl/ge/rproxy/maintenance/WebAgent.conf

<IfModule !mpm_winnt.c>
<IfModule !mpm_netware.c>
User apache
Group apache
</IfModule>
</IfModule>

#SSLProxyCheckPeerCN off
ServerAdmin digitalcollab.infrastructure@ge.com
UseCanonicalName Off
DocumentRoot "/appl/webdocs/corpCommApp"
<Directory />
    Options FollowSymLinks
    AllowOverride None
</Directory>

<Directory "/appl/webdocs/corpCommApp">
    Options Indexes FollowSymLinks
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory>

DirectoryIndex index.html index.html.var

#UserDir public_html
#AccessFileName .htaccess

#<Files ~ "^\.ht">
#    Order allow,deny
#    Deny from all
#</Files>

TypesConfig conf/mime.types
#DefaultType text/plain

#<IfModule mod_mime_magic.c>
#    MIMEMagicFile conf/magic
#</IfModule>

HostnameLookups Off
SSLProtocol -all +TLSv1 +TLSv1.1 +TLSv1.2
SSLCompression off
SSLHonorCipherOrder on
#SSLCipherSuite EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH
SSLCipherSuite HIGH:!aNULL:!MD5

ErrorLog /logs/ge/weblogs/corpCommApp/error.log
ErrorLog "|/appl/apache-2.4.18/bin/rotatelogs /logs/ge/weblogs/corpCommApp/error.log.%Y-%m-%d 86400"
LogLevel warn
LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
LogFormat "%h %l %u %t \"%r\" %>s %b" common
LogFormat "%{Referer}i -> %U" referer
LogFormat "%{User-agent}i" agent
#CustomLog /logs/ge/weblogs/corpCommApp/access.log common
CustomLog "|/appl/apache-2.4.18/bin/rotatelogs /logs/ge/weblogs/corpCommApp/access.log.%Y-%m-%d 86400" common

ServerSignature Off
TraceEnable Off
EnableMMAP Off
ServerTokens Minor

### Siteminder Virtual Directory Mappings ##
#Alias /siteminderagent/ "/usr/netegrity/siteminder5qmr7/webagent/samples/forms/"

#<Directory "/usr/netegrity/siteminder5qmr7/webagent/samples/forms/">
#Options Indexes MultiViews ExecCGI
#AllowOverride None
#Order allow,deny
#Allow from all
#</Directory>

#IndexOptions FancyIndexing VersionSort

#ReadmeName README.html
#HeaderName HEADER.html

#IndexIgnore .??* *~ *# HEADER* README* RCS CVS *,v *,t

AddEncoding x-compress Z
AddEncoding x-gzip gz tgz

AddLanguage da .dk
AddLanguage nl .nl
AddLanguage en .en
AddLanguage et .et
AddLanguage fr .fr
AddLanguage de .de
AddLanguage he .he
AddLanguage el .el
AddLanguage it .it
AddLanguage ja .ja
AddLanguage pl .po
AddLanguage kr .kr
AddLanguage pt .pt
AddLanguage nn .nn
AddLanguage no .no
AddLanguage pt-br .pt-br
AddLanguage ltz .ltz
AddLanguage ca .ca
AddLanguage es .es
AddLanguage sv .se
AddLanguage cz .cz
AddLanguage ru .ru
AddLanguage tw .tw
AddLanguage zh-tw .tw
AddLanguage hr .hr

#LanguagePriority en da nl et fr de el it ja kr no pl pt pt-br ltz ca es sv tw

#ForceLanguagePriority Prefer Fallback

AddDefaultCharset ISO-8859-1

AddCharset ISO-8859-1  .iso8859-1  .latin1
AddCharset ISO-8859-2  .iso8859-2  .latin2 .cen
AddCharset ISO-8859-3  .iso8859-3  .latin3
AddCharset ISO-8859-4  .iso8859-4  .latin4
AddCharset ISO-8859-5  .iso8859-5  .latin5 .cyr .iso-ru
AddCharset ISO-8859-6  .iso8859-6  .latin6 .arb
AddCharset ISO-8859-7  .iso8859-7  .latin7 .grk
AddCharset ISO-8859-8  .iso8859-8  .latin8 .heb
AddCharset ISO-8859-9  .iso8859-9  .latin9 .trk
AddCharset ISO-2022-JP .iso2022-jp .jis
AddCharset ISO-2022-KR .iso2022-kr .kis
AddCharset ISO-2022-CN .iso2022-cn .cis
AddCharset Big5        .Big5       .big5
AddCharset WINDOWS-1251 .cp-1251   .win-1251
AddCharset CP866       .cp866
AddCharset KOI8-r      .koi8-r .koi8-ru
AddCharset KOI8-ru     .koi8-uk .ua
AddCharset ISO-10646-UCS-2 .ucs2
AddCharset ISO-10646-UCS-4 .ucs4
AddCharset UTF-8       .utf8

AddCharset GB2312      .gb2312 .gb
AddCharset utf-7       .utf7
AddCharset utf-8       .utf8
AddCharset big5        .big5 .b5
AddCharset EUC-TW      .euc-tw
AddCharset EUC-JP      .euc-jp
AddCharset EUC-KR      .euc-kr
AddCharset shift_jis   .sjis
AddType application/x-tar .tgz
AddHandler type-map var

<IfModule mod_negotiation.c>
<IfModule mod_include.c>
    Alias /error/ "/appl/apache-2.4.18/error/"

    <Directory "/appl/apache-2.4.18/error">
        AllowOverride None
        Options IncludesNoExec
        AddOutputFilter Includes html
        AddHandler type-map var
        Order allow,deny
        Allow from all
        LanguagePriority en es de fr
        ForceLanguagePriority Prefer Fallback
    </Directory>

    ErrorDocument 400 /error/HTTP_BAD_REQUEST.html.var
    ErrorDocument 401 /error/HTTP_UNAUTHORIZED.html.var
    ErrorDocument 403 /error/HTTP_FORBIDDEN.html.var
    ErrorDocument 404 /error/HTTP_NOT_FOUND.html.var
    ErrorDocument 405 /error/HTTP_METHOD_NOT_ALLOWED.html.var
    ErrorDocument 408 /error/HTTP_REQUEST_TIME_OUT.html.var
    ErrorDocument 410 /error/HTTP_GONE.html.var
    ErrorDocument 411 /error/HTTP_LENGTH_REQUIRED.html.var
    ErrorDocument 412 /error/HTTP_PRECONDITION_FAILED.html.var
    ErrorDocument 413 /error/HTTP_REQUEST_ENTITY_TOO_LARGE.html.var
    ErrorDocument 414 /error/HTTP_REQUEST_URI_TOO_LARGE.html.var
    ErrorDocument 415 /error/HTTP_SERVICE_UNAVAILABLE.html.var
    ErrorDocument 500 /error/HTTP_INTERNAL_SERVER_ERROR.html.var
    ErrorDocument 501 /error/HTTP_NOT_IMPLEMENTED.html.var
    ErrorDocument 502 /error/HTTP_BAD_GATEWAY.html.var
    ErrorDocument 503 /error/HTTP_SERVICE_UNAVAILABLE.html.var
    ErrorDocument 506 /error/HTTP_VARIANT_ALSO_VARIES.html.var

</IfModule>
</IfModule>

BrowserMatch "Mozilla/2" nokeepalive
BrowserMatch "MSIE 4\.0b2;" nokeepalive downgrade-1.0 force-response-1.0
BrowserMatch "RealPlayer 4\.0" force-response-1.0
BrowserMatch "Java/1\.0" force-response-1.0
BrowserMatch "JDK/1\.0" force-response-1.0

BrowserMatch "Microsoft Data Access Internet Publishing Provider" redirect-carefully
BrowserMatch "^WebDrive" redirect-carefully

 <IfModule mod_expires.c>
    ExpiresActive on
    ExpiresByType image/gif A86400
    ExpiresByType image/jpeg A86400
    ExpiresByType image/png A86400
    ExpiresByType text/css A86400
    ExpiresByType application/x-javascript A86400
</IfModule>

 <IfModule mod_deflate.c>
         DeflateBufferSize 64000
         DeflateCompressionLevel 7
         #DeflateFilterNote ratio
         #LogFormat '"%r" %b (%{ratio}n) "%{User-agent}i"' deflate
         #CustomLog logs/deflate.log deflate
         DeflateMemLevel 9
         DeflateWindowSize 15

         <Location />
                 # Insert filter
                 SetOutputFilter DEFLATE

                 # Netscape 4.x has some problems...
                 BrowserMatch ^Mozilla/4 gzip-only-text/html

                 # Netscape 4.06-4.08 have some more problems
                 BrowserMatch ^Mozilla/4\.0[678] no-gzip

                 # MSIE masquerades as Netscape, but it is fine
                 BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
                 #BrowserMatch \bMSIE gzip-only-text/html

                 # NOTE: Due to a bug in mod_setenvif up to Apache 2.0.48
                 # the above regex won't work. You can use the following
                 # workaround to get the desired effect:
                 #BrowserMatch \bMSI[E] !no-gzip !gzip-only-text/html

                 # Don't compress images
                 SetEnvIfNoCase Request_URI \
                 \.(?:gif|jpe?g|png|zip)$ no-gzip dont-vary

                 # Make sure proxies don't deliver the wrong content
                 #Header append Vary User-Agent env=!dont-vary
         </Location>
 </IfModule>

#SSLRandomSeed connect builtin
AddType application/x-x509-ca-cert .crt
AddType application/x-pkcs7-crl    .crl

Mutex  file:/appl/ge/rproxy/corpCommApp/ssl_mutex ssl-cache

Listen 10.63.123.59:81

ServerName "corpcommapp.apps.ge.com"

<Location /server-status>
        SetHandler server-status
       Order deny,allow
        Deny from all
        Allow from 127.0.0.1
</Location>
ExtendedStatus On

<VirtualHost 10.63.123.59:81>
        DocumentRoot "/appl/webdocs/corpCommApp"
        ServerName corpcommapp.apps.ge.com
        ServerAdmin digitalcollab.infrastructure@ge.com

        ErrorLog "/logs/ge/weblogs/corpCommApp/error.log"
        ErrorLog "|/appl/apache-2.4.18/bin/rotatelogs /logs/ge/weblogs/corpCommApp/error.log.%Y-%m-%d 86400"
        CustomLog /logs/ge/weblogs/corpCommApp/access.log common
        CustomLog "|/appl/apache-2.4.18/bin/rotatelogs /logs/ge/weblogs/corpCommApp/access.log.%Y-%m-%d 86400" common
        DirectoryIndex index.html
        ProxyReceiveBufferSize 16384
        #ProxyPass /status/ !
        #ProxyPass /server-status !
        #ProxyPass /desktop/personal https://3.49.168.13/desktop/personal
        #ProxyPass /desktop/folder https://3.49.168.13/desktop/folder
        #ProxyPass / http://3.49.168.13/ retry=1 acquire=3000 timeout=600 Keepalive=On
        #ProxyPassReverse / http://3.49.168.13/
        #ProxyRemote * http://iss-americas-pitc-cincinnati.corporate.ge.com:80
        ProxyRemote "https://getest.voicestorm.com" "http://iss-americas-pitc-cincinnati.corporate.ge.com:80"
        ProxyRemote "https://eddie.ge.com" "http://iss-americas-pitc-cincinnati.corporate.ge.com:80"
        
        # austin 17oct17
        ProxyRemote "https://acrobot.digital.ge.com" "http://iss-americas-pitc-cincinnati.corporate.ge.com:80"

        SSLProxyEngine On
        ProxypreserveHost Off
        ProxyAddHeaders On # X-Forwarded-For, X-Forwarded-Host and X-Forwarded-Server
        SetEnv proxy-sendchunked 1
        
        <Directory "/appl/webdocs/corpCommApp">
                AllowOverride None
                Order allow,deny
                Allow from all
        </Directory>

        <FilesMatch "\.(cgi|shtml|phtml|php3?)$">
                SSLOptions +StdEnvVars
        </FilesMatch>
        
        SetEnvIf User-Agent ".*MSIE.*" nokeepalive ssl-unclean-shutdown downgrade-1.0 force-response-1.0

        <Location "/qa">
                ProxyPass "https://getest.voicestorm.com/"
                ProxyPassReverse "https://getest.voicestorm.com/"
                RequestHeader set Origin "https://getest.voicestorm.com"
        </Location>

        <Location "/prod">
                ProxyPass "https://eddie.ge.com/"
                ProxyPassReverse "https://eddie.ge.com/"
                RequestHeader set Origin "https://eddie.ge.com"
        </Location>

        <Location "/qa-notifications">
                ProxyPass "https://stage-eddie-services.cloud.corporate.ge.com/"
                ProxyPassReverse "https://stage-eddie-services.cloud.corporate.ge.com/"
                RequestHeader set Origin "https://stage-eddie-services.cloud.corporate.ge.com"
       </Location>

       <Location "/notifications">
                ProxyPass "https://eddie-services.cloud.corporate.ge.com/"
                ProxyPassReverse "https://eddie-services.cloud.corporate.ge.com/"
                RequestHeader set Origin "https://eddie-services.cloud.corporate.ge.com"
       </Location>

       <Location "/boxcompliance">
                ProxyPass "https://boxcompliance.cloud.corporate.ge.com/"
                ProxyPassReverse "https://boxcompliance.cloud.corporate.ge.com/"
                RequestHeader set Origin "https://boxcompliance.cloud.corporate.ge.com/"
       </Location>

       # austin 17oct17
       <Location "/acrobot">
                ProxyPass "https://acrobot.cloud.corporate.ge.com/"
                ProxyPassReverse "https://acrobot.cloud.corporate.ge.com/"
                RequestHeader set Origin "https://acrobot.cloud.corporate.ge.com/"
       </Location>
</VirtualHost>

#####SSL.CONF FILE #################
LoadModule ssl_module modules/mod_ssl.so
SSLPassPhraseDialog  builtin
SSLSessionCacheTimeout  300
SSLRandomSeed startup file:/dev/urandom  256
SSLRandomSeed connect builtin
SSLCryptoDevice builtin
SSLHonorCipherOrder On
SSLCipherSuite ALL:!ADH:!EXP:!LOW:!RC2:!3DES:!SEED:RC4+RSA:+HIGH:+MEDIUM
#######################

Listen 10.63.123.59:443

<VirtualHost 10.63.123.59:443>
        DocumentRoot "/appl/webdocs/corpCommApp"
        ServerName corpcommapp.apps.ge.com
        ServerAdmin digitalcollab.infrastructure@ge.com

        SSLEngine on
        SSLCertificateKeyFile "/appl/ge/cert/corpCommApp/corpcomm_apps_ge_com.key"
        SSLCertificateFile  "/appl/ge/cert/corpCommApp/corpcomm_apps_ge_com.crt"

        ErrorLog "/logs/ge/weblogs/corpCommApp/error.log"
        ErrorLog "|/appl/apache-2.4.18/bin/rotatelogs /logs/ge/weblogs/corpCommApp/error.log.%Y-%m-%d 86400"
        CustomLog /logs/ge/weblogs/corpCommApp/access.log common
        CustomLog "|/appl/apache-2.4.18/bin/rotatelogs /logs/ge/weblogs/corpCommApp/access.log.%Y-%m-%d 86400" common
        DirectoryIndex index.html
        ProxyReceiveBufferSize 16384
        #ProxyPass /status/ !
        #ProxyPass /server-status !
        #ProxyPass /desktop/personal https://3.49.168.13/desktop/personal
        #ProxyPass /desktop/folder https://3.49.168.13/desktop/folder
        #ProxyPass / http://3.49.168.13/ retry=1 acquire=3000 timeout=600 Keepalive=On
        #ProxyPassReverse / http://3.49.168.13/
        #ProxyRemote * http://iss-americas-pitc-cincinnati.corporate.ge.com:80
        ProxyRemote "https://getest.voicestorm.com" "http://iss-americas-pitc-cincinnati.corporate.ge.com:80"
        ProxyRemote "https://eddie.ge.com" "http://iss-americas-pitc-cincinnati.corporate.ge.com:80"
        ProxyRemote "https://acrobot.digital.ge.com" "http://iss-americas-pitc-cincinnati.corporate.ge.com:80"

        SSLProxyEngine On
        ProxypreserveHost Off
        ProxyAddHeaders On # X-Forwarded-For, X-Forwarded-Host and X-Forwarded-Server
        SetEnv proxy-sendchunked 1
        <Directory "/appl/webdocs/corpCommApp">
                AllowOverride None
                Order allow,deny
                Allow from all
        </Directory>

        <FilesMatch "\.(cgi|shtml|phtml|php3?)$">
                SSLOptions +StdEnvVars
        </FilesMatch>
        
        SetEnvIf User-Agent ".*MSIE.*" nokeepalive ssl-unclean-shutdown downgrade-1.0 force-response-1.0

         <Location "/qa">
                ProxyPass "https://getest.voicestorm.com/"
                ProxyPassReverse "https://getest.voicestorm.com/"
                RequestHeader set Origin "https://getest.voicestorm.com"
        </Location>

        <Location "/prod">
                ProxyPass "https://eddie.ge.com/"
                ProxyPassReverse "https://eddie.ge.com/"
                RequestHeader set Origin "https://eddie.ge.com"
        </Location>

        <Location "/qa-notifications">
                ProxyPass "https://stage-eddie-services.cloud.corporate.ge.com/"
                ProxyPassReverse "https://stage-eddie-services.cloud.corporate.ge.com/"
                RequestHeader set Origin "https://stage-eddie-services.cloud.corporate.ge.com"
       </Location>

       <Location "/notifications">
                ProxyPass "https://eddie-services.cloud.corporate.ge.com/"
                ProxyPassReverse "https://eddie-services.cloud.corporate.ge.com/"
                RequestHeader set Origin "https://eddie-services.cloud.corporate.ge.com"
       </Location>

       <Location "/boxcompliance">
                ProxyPass "https://boxcompliance.cloud.corporate.ge.com/"
                ProxyPassReverse "https://boxcompliance.cloud.corporate.ge.com/"
                RequestHeader set Origin "https://boxcompliance.cloud.corporate.ge.com/"
       </Location>

       <Location "/acrobot">
                ProxyPass "https://acrobot.cloud.corporate.ge.com/"
                ProxyPassReverse "https://acrobot.cloud.corporate.ge.com/"
                RequestHeader set Origin "https://acrobot.cloud.corporate.ge.com/"
       </Location>
</VirtualHost>